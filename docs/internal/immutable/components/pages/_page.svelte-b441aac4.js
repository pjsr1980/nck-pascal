import{S as ft,i as ct,s as ot,k as m,q as x,a as L,l as p,m as F,r as I,h as g,c as N,n as h,b as at,G as o,I as j,J as q,K as D,B as rt,L as ht,M as _t,u as lt}from"../../chunks/index-c3785617.js";function z(f){return f+7>>3}const bt=[255,1,3,7,15,31,63,127];class M{constructor(s){this._nbits=s,this._data=new Uint8Array(z(s))}clone(){let s=new M(this._nbits);return s._data=new Uint8Array(this._data),s}get nbits(){return this._nbits}get nbytes(){return z(this._nbits)}setAll(s){s?this._data.fill(255):this._data.fill(0)}get(s){let r=!1;return s>=0&&s<this._nbits&&(r=(this._data[s>>3]&1<<(s&7))!=0),r}set(s,r){s>=0&&s<this._nbits&&(r?this._data[s>>3]|=1<<(s&7):this._data[s>>3]&=~(1<<(s&7)))}countTrue(){let s=0,r=0,l=this._nbits;for(;l>=8;){let e=this._data[r];for(let i=0;i<8;i++)e&1<<i&&s++;l-=8,r++}if(l>0){let e=this._data[r];for(let i=0;i<l;i++)e&1<<i&&s++}return s}countFalse(){return this._nbits-this.countTrue()}getTrue(){let s=[],r=0,l=this._nbits;for(;l>=8;){let e=this._data[r];for(let i=0;i<8;i++)e&1<<i&&s.push(r*8+i);l-=8,r++}if(l>0){let e=this._data[r];for(let i=0;i<l;i++)e&1<<i&&s.push(r*8+i)}return s}getFalse(){let s=[],r=0,l=this._nbits;for(;l>=8;){let e=this._data[r];for(let i=0;i<8;i++)e&1<<i||s.push(r*8+i);l-=8,r++}if(l>0){let e=this._data[r];for(let i=0;i<l;i++)e&1<<i||s.push(r*8+i)}return s}toString(){let s=[],r=0,l=this._nbits;for(;l>=8;){let e=this._data[r];for(let i=0;i<8;i++)e&1<<i?s.push("1"):s.push("0");l-=8,r++}if(l>0){let e=this._data[r];for(let i=0;i<l;i++)e&1<<i?s.push("1"):s.push("0")}return s.join("")}equal(s){if(this._nbits!=s._nbits)return!1;if(this._nbits==0)return!0;let r=z(this._nbits)-1;for(let e=0;e<r;e++)if(this._data[e]!=s._data[e])return!1;let l=bt[this._nbits&7];return(this._data[r]&l)==(s._data[r]&l)}}class vt{constructor(s){this._n=0,this._buf=[],s&&this._bufferFill(s)}get N(){return this._n}set N(s){this._bufferFill(s)}nCk(s,r){return s>this._n||r>s||this._n<=0?0n:this._buf[this._bufferPos(s,r)]}reset(){this._n=0,this._buf=[]}map(s,r){return s*(s+1)+r}unmap(s){let r=Math.sqrt(4*s+1)-1>>1;return{n:r,k:s-(r+r*r)}}_bufferPos(s,r){let l=s>>1,e=s+1>>1;return r>l&&(r=s-r),(l*(l+1)+e*(e+1)>>1)+r}_bufferFill(s){if(s<=this._n)return;let r=this._n<2?2:this._n+1;for(this._bufferPos(s+1,0),this._n<2&&(this._buf[0]=1n,this._buf[1]=1n),this._n=s;r<=s;r++){let l=r>>1;this._buf[this._bufferPos(r,0)]=1n;for(let e=1;e<=l;e++)this._buf[this._bufferPos(r,e)]=this._buf[this._bufferPos(r-1,e-1)]+this._buf[this._bufferPos(r-1,e)]}}}function dt(f,s,r,l){if(s<0||r<0||r>s)return;let e={result:new M(s),tr:0,tc:0,rv:0,l1:!0};e.result.setAll(!1),l&&(e.pascal=l,l.N=s,e.row=1n);let i=new nt(s+1),a=!1,n=0,t=i.at(n);if(t.il=!0,t.st=0,t.tr=s,t.tc=r,t.rv=-1,r==0){f.onResult(e);return}for(;n>=0;)if(a)n-=1,a=!1;else if(t=i.at(n),t.il)if(t.st==0)t.tc==0||t.tr==0?a=!0:(t.st=1,t.tr-=1,t.tc-=1,t.rv+=1);else if(t.st==1){if(t.st=2,e.tr=t.tr,e.tc=t.tc,e.rv=t.rv,e.result.set(e.rv,!0),f.goTrue(e))if(t.tc==0)f.onResult(e);else{n++;let u=i.at(n);u.st=0,u.il=!0,u.rv=t.rv,u.tc=t.tc,u.tr=t.tr}}else if(t.st==2)if(t.st=3,e.result.set(t.rv,!1),t.tr>t.tc)if(e.tr=t.tr,e.tc=t.tc,e.rv=t.rv,f.goFalse(e)){l&&e.row&&(e.row+=l.nCk(t.tr,t.tc)),n++;let u=i.at(n);u.st=0,u.il=!1,u.rv=t.rv,u.tc=t.tc,u.tr=t.tr}else a=!0;else a=!0;else l&&e.row&&(e.row-=l.nCk(t.tr,t.tc)),a=!0;else if(t.st==0)t.tr==0?a=!0:(t.st=1,t.tr-=1,t.rv+=1);else if(t.st==1){if(t.st=2,e.tr=t.tr,e.tc=t.tc,e.rv=t.rv,e.result.set(e.rv,!0),f.goTrue(e))if(t.tc==0)f.onResult(e);else{n++;let u=i.at(n);u.st=0,u.il=!0,u.rv=t.rv,u.tc=t.tc,u.tr=t.tr}}else if(t.st==2)if(t.st=3,e.result.set(t.rv,!1),t.tr>t.tc)if(e.tr=t.tr,e.tc=t.tc,e.rv=t.rv,f.goFalse(e)){l&&e.row&&(e.row+=l.nCk(t.tr,t.tc)),n++;let u=i.at(n);u.st=0,u.il=!1,u.rv=t.rv,u.tc=t.tc,u.tr=t.tr}else a=!0;else a=!0;else l&&e.row&&(e.row-=l.nCk(t.tr,t.tc)),a=!0}function mt(f,s,r,l){if(s<0||r>s)return;let e={result:new M(s),tr:0,tc:0,rv:0,l1:!1};e.result.setAll(!0),l&&(e.pascal=l,l.N=s,e.row=1n);let i=new nt(s+1),a=!1,n=0,t=i.at(n);if(t.il=!1,t.st=0,t.tr=s,t.tc=r,t.rv=-1,s==r){f.onResult(e);return}for(;n>=0;)if(a)n-=1,a=!1;else if(t=i.at(n),t.il)if(t.st==0)t.tc==0||t.tr==0?a=!0:(t.st=1,t.tr-=1,t.tc-=1,t.rv+=1);else if(t.st==1){if(t.st=2,e.tr=t.tr,e.tc=t.tc,e.rv=t.rv,e.result.set(e.rv,!1),f.goFalse(e))if(t.tc==t.tr)f.onResult(e);else{n++;let u=i.at(n);u.st=0,u.il=!1,u.rv=t.rv,u.tc=t.tc,u.tr=t.tr}}else if(t.st==2)if(t.st=3,e.result.set(t.rv,!0),t.tr>=t.tc)if(e.tr=t.tr,e.tc=t.tc,e.rv=t.rv,f.goTrue(e)){l&&e.row&&(e.row+=l.nCk(t.tr,t.tc)),n++;let u=i.at(n);u.st=0,u.il=!0,u.rv=t.rv,u.tc=t.tc,u.tr=t.tr}else a=!0;else a=!0;else l&&e.row&&(e.row-=l.nCk(t.tr,t.tc)),a=!0;else if(t.st==0)t.tr==0?a=!0:(t.st=1,t.tr-=1,t.rv+=1);else if(t.st==1){if(t.st=2,e.tr=t.tr,e.tc=t.tc,e.rv=t.rv,e.result.set(e.rv,!1),f.goFalse(e))if(t.tc==t.tr)f.onResult(e);else{n++;let u=i.at(n);u.st=0,u.il=!1,u.rv=t.rv,u.tc=t.tc,u.tr=t.tr}}else if(t.st==2)if(t.st=3,e.result.set(t.rv,!0),t.tr>=t.tc)if(e.tr=t.tr,e.tc=t.tc,e.rv=t.rv,f.goTrue(e)){l&&e.row&&(e.row+=l.nCk(t.tr,t.tc)),n++;let u=i.at(n);u.st=0,u.il=!0,u.rv=t.rv,u.tc=t.tc,u.tr=t.tr}else a=!0;else a=!0;else l&&e.row&&(e.row-=l.nCk(t.tr,t.tc)),a=!0}const C=6;class nt{constructor(s){let r=s>>C,l=s-r*(1<<C);this._n=s,this._cnt=l>0?r+1:r,this._stk=new Array(this._cnt);let e=this._cnt-1;for(let i=0;i<e;i++){this._stk[i]=new Array(1<<C);for(let a=0;a<1<<C;a++)this._stk[i][a]={st:0,il:!1,rv:0,tr:0,tc:0}}this._stk[e]=new Array(l>0?l:1<<C);for(let i=0;i<this._stk[e].length;i++)this._stk[e][i]={st:0,il:!1,rv:0,tr:0,tc:0}}at(s){let r=s>>C,l=s-r*(1<<C);return this._stk[r][l]}}function it(f,s,r){const l=f.slice();return l[13]=s[r],l}function ut(f){let s,r,l=f[13].row+"",e,i,a=f[13].value+"",n,t;return{c(){s=m("li"),r=m("span"),e=x(l),i=L(),n=x(a),t=L(),this.h()},l(u){s=p(u,"LI",{});var b=F(s);r=p(b,"SPAN",{class:!0});var w=F(r);e=I(w,l),w.forEach(g),i=N(b),n=I(b,a),t=N(b),b.forEach(g),this.h()},h(){h(r,"class","row svelte-15dt7bm")},m(u,b){at(u,s,b),o(s,r),o(r,e),o(s,i),o(s,n),o(s,t)},p(u,b){b&1&&l!==(l=u[13].row+"")&&lt(e,l),b&1&&a!==(a=u[13].value+"")&&lt(n,a)},d(u){u&&g(s)}}}function pt(f){let s,r,l,e,i,a,n,t,u,b,w,S,U,d,B,E,T,G,y,H,A,J,O,K,P,X,Q,R=f[0],v=[];for(let _=0;_<R.length;_+=1)v[_]=ut(it(f,R,_));return{c(){s=m("div"),r=m("div"),l=m("h1"),e=x("@pjsr/nck-pascal"),i=L(),a=m("label"),n=x("N:"),t=L(),u=m("input"),b=L(),w=m("label"),S=x("K:"),U=L(),d=m("input"),B=L(),E=m("label"),T=x("L1:"),G=L(),y=m("input"),H=L(),A=m("button"),J=x("Calculate"),O=L(),K=m("div"),P=m("ul");for(let _=0;_<v.length;_+=1)v[_].c();this.h()},l(_){s=p(_,"DIV",{class:!0});var k=F(s);r=p(k,"DIV",{class:!0});var c=F(r);l=p(c,"H1",{class:!0});var V=F(l);e=I(V,"@pjsr/nck-pascal"),V.forEach(g),i=N(c),a=p(c,"LABEL",{for:!0,class:!0});var W=F(a);n=I(W,"N:"),W.forEach(g),t=N(c),u=p(c,"INPUT",{type:!0,min:!0,max:!0,id:!0,class:!0}),b=N(c),w=p(c,"LABEL",{for:!0,class:!0});var Y=F(w);S=I(Y,"K:"),Y.forEach(g),U=N(c),d=p(c,"INPUT",{type:!0,min:!0,max:!0,id:!0,class:!0}),B=N(c),E=p(c,"LABEL",{for:!0,class:!0});var $=F(E);T=I($,"L1:"),$.forEach(g),G=N(c),y=p(c,"INPUT",{type:!0,id:!0}),H=N(c),A=p(c,"BUTTON",{class:!0});var tt=F(A);J=I(tt,"Calculate"),tt.forEach(g),c.forEach(g),O=N(k),K=p(k,"DIV",{class:!0});var et=F(K);P=p(et,"UL",{class:!0});var st=F(P);for(let Z=0;Z<v.length;Z+=1)v[Z].l(st);st.forEach(g),et.forEach(g),k.forEach(g),this.h()},h(){h(l,"class","svelte-15dt7bm"),h(a,"for","N"),h(a,"class","svelte-15dt7bm"),h(u,"type","number"),h(u,"min","0"),h(u,"max","100"),h(u,"id","N"),h(u,"class","svelte-15dt7bm"),h(w,"for","K"),h(w,"class","svelte-15dt7bm"),h(d,"type","number"),h(d,"min","0"),h(d,"max","100"),h(d,"id","K"),h(d,"class","svelte-15dt7bm"),h(E,"for","L1"),h(E,"class","svelte-15dt7bm"),h(y,"type","checkbox"),h(y,"id","L1"),h(A,"class","svelte-15dt7bm"),h(r,"class","header svelte-15dt7bm"),h(P,"class","svelte-15dt7bm"),h(K,"class","result svelte-15dt7bm"),h(s,"class","main svelte-15dt7bm")},m(_,k){at(_,s,k),o(s,r),o(r,l),o(l,e),o(r,i),o(r,a),o(a,n),o(r,t),o(r,u),j(u,f[1]),o(r,b),o(r,w),o(w,S),o(r,U),o(r,d),j(d,f[2]),o(r,B),o(r,E),o(E,T),o(r,G),o(r,y),y.checked=f[3],o(r,H),o(r,A),o(A,J),o(s,O),o(s,K),o(K,P);for(let c=0;c<v.length;c+=1)v[c].m(P,null);X||(Q=[q(u,"input",f[5]),q(d,"input",f[6]),q(y,"change",f[7]),q(A,"click",f[4])],X=!0)},p(_,[k]){if(k&2&&D(u.value)!==_[1]&&j(u,_[1]),k&4&&D(d.value)!==_[2]&&j(d,_[2]),k&8&&(y.checked=_[3]),k&1){R=_[0];let c;for(c=0;c<R.length;c+=1){const V=it(_,R,c);v[c]?v[c].p(V,k):(v[c]=ut(V),v[c].c(),v[c].m(P,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=R.length}},i:rt,o:rt,d(_){_&&g(s),ht(v,_),X=!1,_t(Q)}}}function wt(f,s,r){let l=[],e="6",i="2",a=!0,n=!1,t=!0;class u{constructor(){}onResult(T){T.row&&l.push({row:T.row,value:T.result.toString()})}goFalse(T){return!n}goTrue(T){return!n}}const b=new vt,w=new u;async function S(){if(!n){if(!t)for(n=!0;!t;)setTimeout(()=>{},1e3);n=!1,r(0,l=[]),t=!1,a?dt(w,+e,+i,b):mt(w,+e,+i,b),t=!0}}S();function U(){e=D(this.value),r(1,e)}function d(){i=D(this.value),r(2,i)}function B(){a=this.checked,r(3,a)}return[l,e,i,a,S,U,d,B]}class kt extends ft{constructor(s){super(),ct(this,s,wt,pt,ot,{})}}export{kt as default};
